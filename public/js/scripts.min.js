function startGame(){$('.instruction').hide(),$('#timer').show(),$('#recipe_list').show(),$('#start').off('click',startGame),$('#start').hide(),getList(),arrowDown()}function getList(){for(var a='',b='<img src=\''+recipe[0].img+'\'>',c=1;totalRecipe>c;c++)a+='<li class=\'pannkakor\' id=\''+recipe[c].id+'\'>',a+='<img src=\''+recipe[c].img+'\'>',a+='</li>';$('#ingredients').html(a),$('#recipe').html(b)}function getIngredients(){for(var a='',b=1;totalRecipe>b;b++)a+='<img src=\''+recipe[b].img+'\' class=\'draggableItem ok '+recipe[b].ingr+'\' id=\''+recipe[b].id+'\'>';$('#items').html(a)}function startTimer(){timer=setInterval(countTime,1e3)}function countTime(){timerCount++;var a=Math.floor(timerCount/60),b=Math.floor(a/60);60>a?$('#timer_text').html(padNumber(a)+':'+padNumber(timerCount-60*a)):$('#timer_text').html(padNumber(b)+':'+padNumber(a-60*b)+':'+padNumber(timerCount-60*a))}function padNumber(a){return 10>a?'0'+a:a}function dragAndDrop(){$('.draggableItem').draggable({revert:function(a){if(!a){var b='<img src=\'../img/normal.png\'>';return $('#face').html('<img src=\'../img/fail.png\'>'),setTimeout(function(){$('#face').html(b)},1e3),!0}}}),$('.kastrull').droppable({accept:'.ok',drop:function(a,b){for(var c=b.draggable[0].id,d='#'+c,e=1;totalRecipe>e;e++)if(recipe[e].id==c){$(d).addClass('done'),b.draggable.hide(),$('.star').show().animate({bottom:'+=150px'},'slow',function(){$(this).removeAttr('style')});var f='<img src=\'../img/normal.png\'>';$('#face').html('<img src=\'../img/success.png\'>'),setTimeout(function(){$('#face').html(f)},1e3)}4==$('.done').length&&(setTimeout(stopTimer),setTimeout(finnishedGame,1e3))}})}function stopTimer(){clearInterval(timer)}function arrowDown(){for(i=0;i<3;i++)$('#arrowDown').animate({top:'+=40px'},450).delay(150),$('#arrowDown').animate({top:'-=40px'},450);$('#arrowDown').fadeOut(),setTimeout(startTimer,3150),setTimeout(dragAndDrop,3150)}function finnishedGame(){$('#finnishedPancakes').animate({height:350,top:200,left:200,opacity:1},{duration:500}),$('#finnished').fadeIn(),window.setTimeout(function(){$('#goodJob').show()},600),setTimeout(result,2e3)}function result(){$('#wrapper').hide(),$('#result').fadeIn('slow');var a='<img src=\''+recipe[0].img+'\'>';$('.recipeImg').html(a),$('.playAgain').on('click',function(){window.location='index.php?reload=true'})}function getPlayers(){var a='';for(i=0;i<totalPlayers;i++)a+='<li>',a+='<img src="../img/star-green.png" alt="greenstar">'+playersList[i].name,a+='<span>'+playersList[i].time+'</span></li>';$('.ranking').html(a)}var timer,points=0,timerCount=0,correctItems=0,recipe,currentRecipe=0,totalRecipe=0,id='',playersList;$(document).ready(function(){$('#timer').hide(),$('#recipe_list').hide(),$('#send').click(function(a){a.preventDefault(),startGame();var b=$('#name').val();localStorage.setItem('playerName',b)}),$.getJSON('../players.json',function(a){playersList=a.players,totalPlayers=playersList.length,getPlayers()}),$.getJSON('../recipes.json',function(a){recipe=a.recipe,totalRecipe=recipe.length,getIngredients(),window.location.href.indexOf('reload=true')>-1&&startGame()})});